<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="seq_servis_urun" model="ir.sequence">
        <field name="name">Servis Ürün Kodu</field>
        <field name="code">servis.urun.sequence</field>
        <field name="prefix">URN</field>
        <field name="padding">7</field>
        <field name="company_id" eval="False"/>
    </record>

    <record id="action_urun_parki" model="ir.actions.act_window">
        <field name="name">Ürün Parkı</field>
        <field name="res_model">servis.urun</field>
        <field name="view_mode">list,form</field>
    </record>

    <record id="view_servis_urun_list" model="ir.ui.view">
        <field name="name">servis.urun.list</field>
        <field name="model">servis.urun</field>
        <field name="arch" type="xml">
            <list string="Ürün Parkı" multi_edit="1" sample="1">
                <field name="name" string="Ürün Kodu" readonly="1"/>
                <field name="tur_id" optional="show"/>
                <field name="marka_id" optional="show"/>
                <field name="model_id" optional="show"/>
                <field name="serial_no" optional="show"/>
                <field name="musteri_id" optional="show"/>
                <field name="garanti_bitis" widget="remaining_days" optional="show"/>
                <field name="garanti_durumu" string="Garanti Durumu" widget="badge" decoration-danger="garanti_durumu == 'yok'" decoration-success="garanti_durumu == 'devam'" decoration-info="garanti_durumu == 'belirsiz'"/>
                <field name="barcode" optional="hide"/>
                <field name="location" optional="hide"/>
            </list>
        </field>
    </record>

    <record id="view_servis_urun_form" model="ir.ui.view">
        <field name="name">servis.urun.form</field>
        <field name="model">servis.urun</field>
        <field name="arch" type="xml">
            <form string="Ürün Kaydı">
                <sheet>
                    <div class="oe_title">
                        <label for="name" string="Ürün Kodu"/>
                        <h1>
                            <field name="name" readonly="1"/>
                        </h1>
                    </div>
                    <group>
                        <group string="Ürün Temel Bilgileri">
                            <field name="tur_id" options="{'no_create_edit': True}"/>
                            <field name="marka_id" options="{'no_create_edit': True}" domain="[('tur_id', '=', tur_id)]" context="{'default_tur_id': tur_id}"/>
                            <field name="model_id" options="{'no_create_edit': True}" domain="[('marka_id', '=', marka_id)]" context="{'default_marka_id': marka_id, 'default_tur_id': tur_id}"/>
                        </group>
                        <group string="Kimlik Bilgileri">
                            <field name="serial_no" placeholder="S/N Numarası"/>
                            <field name="barcode" placeholder="Barkod Okutun"/>
                            <field name="location"/>
                        </group>
                    </group>

                    <group string="Müşteri Bilgileri">
                        <group>
                            <field name="musteri_tipi" />
                            <field name="musteri_id" context="{'default_is_company': musteri_tipi == 'sirket'}"/>
                        </group>
                        <group>
                            <field name="etiket_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create': True}" placeholder="Etiket seçin..."/>
                        </group>
                    </group>

                    <notebook>
                        <page string="Garanti Durumu" name="garanti_page">
                            <group>
                                <group>
                                    <field name="garanti_baslama"/>
                                    <field name="garanti_suresi"/>
                                </group>
                                <group>
                                    <field name="garanti_bitis" readonly="1"/>
                                    <field name="garanti_durumu" invisible="1"/>
                                    <div colspan="2" class="mt-2 mb-2" invisible="garanti_durumu == 'belirsiz'">
                                        <div invisible="garanti_durumu != 'yok'" class="alert alert-danger text-center p-2">
                                            <i class="fa fa-exclamation-triangle mr-2"/>
GARANTİSİ YOK
                                        </div>
                                        <div invisible="garanti_durumu != 'devam'" class="alert alert-success text-center p-2">
                                            <i class="fa fa-check-circle mr-2"/>
GARANTİSİ DEVAM EDİYOR
                                        </div>
                                    </div>
                                </group>
                            </group>
                        </page>
                        <page string="Dokümanlar" name="page_dokumanlar">
                            <field name="dokuman_ids" context="{'default_urun_id': id}">
                                <list string="Ürün Dokümanları" create="true" edit="false" delete="true">
                                    <field name="konu" readonly="1"/>
                                    <field name="dokuman_dosya_isim" column_invisible="True"/>
                                    <field name="dokuman_dosya" widget="binary" filename="dokuman_dosya_isim" string="Dosya" readonly="1"/>
                                    <field name="dokuman_tarihi" string="Yükleme Tarihi" readonly="1"/>
                                    <field name="dokuman_personel_id" widget="many2one_avatar_user" readonly="1"/>
                                    <button name="action_preview_document" string="Önizle" type="object" icon="fa-eye" class="btn-link"/>
                                </list>
                            </field>
                        </page>
                        <page string="Notlar" name="page_notlar">
                            <field name="note_ids" context="{'default_urun_id': id}">
                                <list string="Notlar" editable="bottom">
                                    <field name="konu"/>
                                    <field name="aciklama"/>
                                    <field name="not_kayit_tarihi" string="Tarih"/>
                                    <field name="not_personel_id" string="Personel" widget="many2one_avatar_user"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
</odoo>