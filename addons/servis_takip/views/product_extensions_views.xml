<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="product_template_form_view_inherit_multi_currency" model="ir.ui.view">
        <field name="name">product.template.form.inherit.multi.currency</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">

            <!-- Native alanlarÄ± gizle - custom alanlar gÃ¶sterilecek -->
            <xpath expr="//field[@name='taxes_id']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='list_price']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <xpath expr="//field[@name='list_price']" position="after">
                <div class="row mt-3 mb-3">
                    <div class="col-lg-6">
                        <label for="taxes_id" string="SatÄ±ÅŸ Vergileri"/>
                        <field name="taxes_id" widget="many2many_tags" placeholder="Vergi seÃ§iniz" domain="[('type_tax_use', '=', 'sale')]" context="{'default_type_tax_use': 'sale', 'search_default_sale': 1}"/>
                    </div>
                </div>

                <!-- SATIÅž FÄ°YATLARI GRID -->
                <div class="row mt-3 mb-3">
                    <div class="col-lg-6">
                        <label for="list_price" string="SatÄ±ÅŸ FiyatÄ± (TL)"/>
                        <field name="list_price" widget="float" class="oe_inline"/>
                    </div>
                    <div class="col-lg-6">
                        <label for="price_with_tax" string="Vergiler Dahil SatÄ±ÅŸ FiyatÄ± (TL)"/>
                        <field name="price_with_tax" widget="float" class="oe_inline"/>
                    </div>
                </div>

                <!-- SATIÅž FÄ°YATLARI DÃ–VIZ -->
                <div class="row mt-3 mb-3">
                    <div class="col-lg-12">
                        <label for="custom_currency_id" string="DÃ¶viz Para Birimi" style="font-weight: bold;"/>
                        <field name="custom_currency_id" class="oe_inline" options="{'no_create': True, 'no_open': True}" style="max-width: 200px;"/>
                    </div>
                </div>

                <div class="row mt-2 mb-3">
                    <div class="col-lg-6">
                        <label for="custom_list_price" string="SatÄ±ÅŸ FiyatÄ± DÃ¶viz"/>
                        <field name="custom_list_price" class="oe_inline" widget="float" placeholder="DÃ¶viz"/>
                    </div>
                    <div class="col-lg-6">
                        <label for="custom_list_price_with_tax" string="Ver. Dahil SatÄ±ÅŸ FiyatÄ± DÃ¶viz"/>
                        <field name="custom_list_price_with_tax" class="oe_inline" widget="float" placeholder="DÃ¶viz"/>
                    </div>
                </div>

                <p class="text-muted" style="font-size: 12px; margin-top: 10px;">
                    ðŸ’¡ <strong>Otomatik DÃ¶nÃ¼ÅŸÃ¼m:</strong> Hangi alanÄ± deÄŸiÅŸtirirseniz diÄŸerleri otomatik hesaplanÄ±r.
                </p>
            </xpath>

            <!-- Native maliyet alanÄ±nÄ± gizle -->
            <xpath expr="//field[@name='standard_price']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>

            <!-- Maliyet (SatÄ±nalma) Vergileri BÃ¶lÃ¼mÃ¼ -->
            <xpath expr="//field[@name='standard_price']" position="after">
                <div class="row mt-3 mb-3">
                    <div class="col-lg-6">
                        <label for="supplier_taxes_id" string="SatÄ±nalma Vergileri"/>
                        <field name="supplier_taxes_id" widget="many2many_tags" placeholder="Vergi seÃ§iniz" domain="[('type_tax_use', '=', 'purchase')]" context="{'default_type_tax_use': 'purchase', 'search_default_purchase': 1}"/>
                    </div>
                </div>

                <!-- MALÄ°YET FÄ°YATLARI GRID -->
                <div class="row mt-3 mb-3">
                    <div class="col-lg-6">
                        <label for="standard_price" string="Maliyet (TL)"/>
                        <field name="standard_price" widget="float" class="oe_inline"/>
                    </div>
                    <div class="col-lg-6">
                        <label for="cost_with_tax" string="Vergiler Dahil Maliyet (TL)"/>
                        <field name="cost_with_tax" widget="float" class="oe_inline"/>
                    </div>
                </div>

                <!-- MALÄ°YET FÄ°YATLARI DÃ–VIZ -->
                <div class="row mt-3 mb-3">
                    <div class="col-lg-12">
                        <label for="custom_cost_currency_id" string="DÃ¶viz Para Birimi" style="font-weight: bold;"/>
                        <field name="custom_cost_currency_id" class="oe_inline" options="{'no_create': True, 'no_open': True}" style="max-width: 200px;"/>
                    </div>
                </div>

                <div class="row mt-2 mb-3">
                    <div class="col-lg-6">
                        <label for="custom_cost_price" string="Maliyet DÃ¶viz"/>
                        <field name="custom_cost_price" class="oe_inline" widget="float" placeholder="DÃ¶viz"/>
                    </div>
                    <div class="col-lg-6">
                        <label for="custom_cost_price_with_tax" string="Ver. Dahil Maliyet DÃ¶viz"/>
                        <field name="custom_cost_price_with_tax" class="oe_inline" widget="float" placeholder="DÃ¶viz"/>
                    </div>
                </div>

                <p class="text-muted" style="font-size: 12px; margin-top: 10px;">
                    ðŸ’¡ <strong>Otomatik DÃ¶nÃ¼ÅŸÃ¼m:</strong> Hangi alanÄ± deÄŸiÅŸtirirseniz diÄŸerleri otomatik hesaplanÄ±r.
                </p>
            </xpath>
        </field>
    </record>

    <record id="product_template_tree_view_inherit_multi_currency" model="ir.ui.view">
        <field name="name">product.template.tree.inherit.multi.currency</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_tree_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='list_price']" position="after">
                <field name="price_with_tax_display"/>
                <field name="custom_list_price_display" optional="show"/>
            </xpath>
            <xpath expr="//field[@name='standard_price']" position="after">
                <field name="custom_cost_price_display" optional="show"/>
            </xpath>
        </field>
    </record>

    <!-- DÃ¶viz DÃ¶nÃ¼ÅŸÃ¼m Action'larÄ± -->
    <record id="product_template_action_convert_dÃ¶viz_to_tl" model="ir.actions.server">
        <field name="name">DÃ¶vizden TL'ye Hesapla</field>
        <field name="model_id" ref="product.model_product_template"/>
        <field name="binding_model_id" ref="product.model_product_template"/>
        <field name="binding_type">action</field>
        <field name="state">code</field>
        <field name="code">
if records:
    records.action_convert_dÃ¶viz_to_tl()
        </field>
    </record>

    <record id="product_template_action_convert_tl_to_dÃ¶viz" model="ir.actions.server">
        <field name="name">TL'den DÃ¶vize Hesapla</field>
        <field name="model_id" ref="product.model_product_template"/>
        <field name="binding_model_id" ref="product.model_product_template"/>
        <field name="binding_type">action</field>
        <field name="state">code</field>
        <field name="code">
if records:
    records.action_convert_tl_to_dÃ¶viz()
        </field>
    </record>
</odoo>